<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlcoCare - „ÅäÈÖí„Å®ÂÅ•Â∫∑„ÅÆË®òÈå≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #020617;
            color: #f8fafc;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1e293b;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 10px;
        }
        /* Tailwind doesn't handle all animations by default in CDN without config */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
    </style>
    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@19.0.0",
    "react-dom": "https://esm.sh/react-dom@19.0.0",
    "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
    "lucide-react": "https://esm.sh/lucide-react@0.460.0",
    "recharts": "https://esm.sh/recharts@2.13.3",
    "@google/genai": "https://esm.sh/@google/genai@0.21.0",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "react/": "https://esm.sh/react@^19.2.4/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useMemo, useRef } from 'react';
        import ReactDOM from 'react-dom/client';
        import { 
            Plus, History, Activity, Settings, RefreshCw, AlertCircle, 
            Info, Camera, X, User 
        } from 'lucide-react';
        import { 
            BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer 
        } from 'recharts';
        import { GoogleGenAI, Type } from '@google/genai';

        // --- Types & Enums ---
        const Gender = { MALE: 'MALE', FEMALE: 'FEMALE' };
        const AICharacter = { DOCTOR: 'DOCTOR', MAMA: 'MAMA', BUTLER: 'BUTLER' };

        // --- Constants ---
        const DRINK_PRESETS = [
            { name: '„Éì„Éº„É´ (350ml)', abv: 5, volume: 350 },
            { name: '„Éì„Éº„É´ (500ml)', abv: 5, volume: 500 },
            { name: '„Çπ„Éà„É≠„É≥„Ç∞Áº∂ (350ml)', abv: 9, volume: 350 },
            { name: '„Éè„Ç§„Éú„Éº„É´ („Ç∞„É©„Çπ)', abv: 7, volume: 200 },
            { name: '„É¨„É¢„É≥„Çµ„ÉØ„Éº („Ç∞„É©„Çπ)', abv: 5, volume: 200 },
            { name: 'Êó•Êú¨ÈÖí (1Âêà)', abv: 15, volume: 180 },
            { name: '„ÉØ„Ç§„É≥ („Ç∞„É©„Çπ)', abv: 12, volume: 125 },
            { name: 'ÁÑºÈÖé („Ç∞„É©„Çπ)', abv: 25, volume: 100 },
            { name: '„Ç¶„Ç§„Çπ„Ç≠„Éº („Ç∑„É≥„Ç∞„É´)', abv: 40, volume: 30 },
        ];

        const BAC_FACTORS = {
            MALE: 0.68,
            FEMALE: 0.55,
            METABOLISM_RATE: 0.015,
        };

        const CHARACTERS = {
            [AICharacter.DOCTOR]: {
                name: 'Âé≥Ê†º„Å™ÂåªËÄÖ',
                description: 'ÂåªÂ≠¶ÁöÑË¶ãÂú∞„Åã„ÇâÂé≥„Åó„Åè„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Åæ„Åô',
                instruction: '„ÅÇ„Å™„Åü„ÅØËÇùËáìÂÜÖÁßëÂåª„Åß„Åô„ÄÇÂåªÂ≠¶ÁöÑË¶ãÂú∞„Åã„Çâ„Ç¢„É´„Ç≥„Éº„É´Èáè„ÇíÂé≥„Åó„Åè„ÉÅ„Çß„ÉÉ„ÇØ„Åó„ÄÅÈÅéÂâ∞ÊëÇÂèñ„Å´„ÅØË≠¶Âëä„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇË™ûÂ∞æ„ÅØ„Äå„Äú„Åß„Åô„Äç„Äå„Äú„Å™„Åï„ÅÑ„Äç„ÄÇ',
                icon: 'üë®‚Äç‚öïÔ∏è'
            },
            [AICharacter.MAMA]: {
                name: 'ÈäÄÂ∫ß„ÅÆ„Éû„Éû',
                description: '‰∏äÂìÅ„Å´Âä¥„ÅÑ„ÄÅÂØÑ„ÇäÊ∑ª„ÅÑ„Åæ„Åô',
                instruction: '„ÅÇ„Å™„Åü„ÅØÈäÄÂ∫ß„ÅÆÈ´òÁ¥ö„Éê„Éº„ÅÆ„Éû„Éû„Åß„Åô„ÄÇ‰∏äÂìÅ„Å´Âä¥„ÅÑ„Å™„Åå„Çâ„ÄÅ„ÅäÈÖí„ÅÆÁ®ÆÈ°û„ÇíË®òÈå≤„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇË™ûÂ∞æ„ÅØ„Äå„Äú„Å≠„Äç„Äå„Äú„Å†„Çè„Äç„ÄÇ',
                icon: 'üë©‚Äçüíº'
            },
            [AICharacter.BUTLER]: {
                name: 'Âü∑‰∫ã',
                description: 'ÂÅ•Â∫∑„Å®Âá∫Ë≤ª„Çí‰∏ÅÂØß„Å´ÁÆ°ÁêÜ„Åó„Åæ„Åô',
                instruction: '„ÅÇ„Å™„Åü„ÅØÂø†ÂÆü„Å™Âü∑‰∫ã„Åß„Åô„ÄÇÊó¶ÈÇ£Êßò„ÅÆÂÅ•Â∫∑„Å®Âá∫Ë≤ª„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ‰∏ÅÂØß„Å™Âè£Ë™ø„Åß„Ç¢„É´„Ç≥„Éº„É´Èáè„Å®Ê¶ÇÁÆóË≤ªÁî®„ÇíÂ†±Âëä„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                icon: 'ü§µ'
            }
        };

        // --- Utilities ---
        const calculateAlcoholGrams = (drink) => drink.volume * (drink.abv / 100) * 0.8;

        const calculateCurrentStats = (drinks, profile) => {
            const now = Date.now();
            const genderFactor = profile.gender === Gender.MALE ? BAC_FACTORS.MALE : BAC_FACTORS.FEMALE;
            let totalAlcoholGrams = 0;
            let bac = 0;
            let totalCalories = 0;

            drinks.forEach(drink => {
                const alcoholGrams = calculateAlcoholGrams(drink);
                totalAlcoholGrams += alcoholGrams;
                totalCalories += (alcoholGrams * 7) + (drink.volume * 0.1);
                const hoursSinceStart = (now - drink.timestamp) / (1000 * 60 * 60);
                const initialBAC = (alcoholGrams / (profile.weight * 1000 * genderFactor)) * 100;
                const currentBAC = Math.max(0, initialBAC - (BAC_FACTORS.METABOLISM_RATE * hoursSinceStart));
                bac += currentBAC;
            });

            return {
                bac: Number(bac.toFixed(3)),
                soberInHours: Number((bac / BAC_FACTORS.METABOLISM_RATE).toFixed(1)),
                totalAlcoholGrams: Math.round(totalAlcoholGrams),
                liverStress: totalAlcoholGrams > 40 ? 'High' : (totalAlcoholGrams > 20 ? 'Moderate' : 'Low'),
                calories: Math.round(totalCalories)
            };
        };

        // --- Main App Component ---
        const App = () => {
            const [profile, setProfile] = useState(() => {
                const saved = localStorage.getItem('alco_profile');
                return saved ? JSON.parse(saved) : { weight: 70, gender: Gender.MALE, character: AICharacter.DOCTOR };
            });
            const [drinks, setDrinks] = useState(() => {
                const saved = localStorage.getItem('alco_drinks');
                return saved ? JSON.parse(saved) : [];
            });
            const [aiResponse, setAiResponse] = useState("");
            const [isAiLoading, setIsAiLoading] = useState(false);
            const [isPhotoAnalyzing, setIsPhotoAnalyzing] = useState(false);
            const [showSettings, setShowSettings] = useState(false);
            const [showLogModal, setShowLogModal] = useState(false);
            const [analysisError, setAnalysisError] = useState(null);
            const fileInputRef = useRef(null);

            useEffect(() => localStorage.setItem('alco_profile', JSON.stringify(profile)), [profile]);
            useEffect(() => localStorage.setItem('alco_drinks', JSON.stringify(drinks)), [drinks]);

            const stats = useMemo(() => calculateCurrentStats(drinks, profile), [drinks, profile]);

            const addDrink = (drinkData) => {
                setDrinks([{ id: Math.random().toString(36).substr(2, 9), ...drinkData, timestamp: Date.now() }, ...drinks]);
                setShowLogModal(false);
            };

            const analyzePhoto = async (e) => {
                const file = e.target.files?.[0];
                if (!file) return;
                setIsPhotoAnalyzing(true);
                setAnalysisError(null);
                try {
                    const base64 = await new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = () => resolve(reader.result.split(',')[1]);
                        reader.readAsDataURL(file);
                    });
                    const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                    const response = await ai.models.generateContent({
                        model: 'gemini-3-flash-preview',
                        contents: [{ parts: [{ inlineData: { mimeType: file.type, data: base64 } }, { text: "„Åì„ÅÆ„ÅäÈÖí„ÅÆÂÜôÁúü„ÇíËß£Êûê„Åó„Å¶Á®ÆÈ°û„ÄÅABV(%)„ÄÅÂÜÖÂÆπÈáè(ml)„ÇíJSONÂΩ¢Âºè„ÅßËøî„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö {\"name\": \"ÂêçÂâç\", \"abv\": 5.0, \"volume\": 350}" }] }],
                        config: {
                            responseMimeType: "application/json",
                            responseSchema: {
                                type: Type.OBJECT,
                                properties: { name: { type: Type.STRING }, abv: { type: Type.NUMBER }, volume: { type: Type.NUMBER } },
                                required: ["name", "abv", "volume"]
                            }
                        }
                    });
                    const result = JSON.parse(response.text);
                    addDrink(result);
                } catch (error) {
                    setAnalysisError("Ëß£Êûê„Ç®„É©„Éº„ÄÇAPI„Ç≠„Éº„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ");
                } finally {
                    setIsPhotoAnalyzing(false);
                    if (fileInputRef.current) fileInputRef.current.value = '';
                }
            };

            const getAIAdvice = async () => {
                if (drinks.length === 0) return;
                setIsAiLoading(true);
                try {
                    const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                    const drinkSummary = drinks.slice(0, 5).map(d => `${d.name} (${d.abv}% ${d.volume}ml)`).join(', ');
                    const charInfo = CHARACTERS[profile.character || AICharacter.DOCTOR];
                    const response = await ai.models.generateContent({
                        model: 'gemini-3-flash-preview',
                        contents: `Ë®òÈå≤: ${drinkSummary}, BAC: ${stats.bac}%, Á∑èÈáè: ${stats.totalAlcoholGrams}g. „Åì„Çå„Å´Âü∫„Å•„Åç„ÄÅË®≠ÂÆö„Åï„Çå„Åü‰∫∫Ê†º„Åß„Ç¢„Éâ„Éê„Ç§„Çπ„Åó„Å¶„ÄÇ`,
                        config: { systemInstruction: charInfo.instruction }
                    });
                    setAiResponse(response.text);
                } catch (error) {
                    setAiResponse("AIËß£Êûê‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ");
                } finally {
                    setIsAiLoading(false);
                }
            };

            const chartData = useMemo(() => {
                const days = {};
                drinks.forEach(d => {
                    const date = new Date(d.timestamp).toLocaleDateString();
                    days[date] = (days[date] || 0) + calculateAlcoholGrams(d);
                });
                return Object.entries(days).map(([name, amount]) => ({ name, amount })).reverse().slice(0, 7);
            }, [drinks]);

            const activeChar = CHARACTERS[profile.character || AICharacter.DOCTOR];

            // Render helper (using standard React API for direct browser execution)
            const el = React.createElement;

            return el('div', { className: "min-h-screen pb-24 max-w-2xl mx-auto px-4 pt-6 bg-slate-950 text-slate-200" },
                el('header', { className: "flex justify-between items-center mb-8" },
                    el('div', null,
                        el('h1', { className: "text-2xl font-bold bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent" }, "AlcoCare"),
                        el('p', { className: "text-slate-400 text-xs mt-1" }, "„ÅÇ„Å™„Åü„ÅÆÂÅ•Â∫∑„Å™È£≤ÈÖí„Çí„Çµ„Éù„Éº„Éà")
                    ),
                    el('button', { onClick: () => setShowSettings(!showSettings), className: `p-2 rounded-full ${showSettings ? 'bg-amber-500 text-white' : 'bg-slate-800'}` }, el(Settings, { size: 20 }))
                ),

                showSettings && el('div', { className: "mb-8 p-6 bg-slate-800/50 rounded-2xl border border-slate-700 animate-fade-in" },
                    el('h2', { className: "text-lg font-semibold mb-4 flex items-center gap-2" }, el(Info, { size: 18 }), "„Éó„É≠„Éï„Ç£„Éº„É´Ë®≠ÂÆö"),
                    el('div', { className: "space-y-6" },
                        el('div', { className: "grid grid-cols-2 gap-4" },
                            el('div', null,
                                el('label', { className: "block text-sm text-slate-400 mb-2" }, "ÊÄßÂà•"),
                                el('div', { className: "flex gap-2" },
                                    el('button', { onClick: () => setProfile({...profile, gender: Gender.MALE}), className: `flex-1 py-2 rounded-lg border text-sm ${profile.gender === Gender.MALE ? 'bg-amber-500 border-amber-500' : 'border-slate-600 text-slate-400'}` }, "Áî∑ÊÄß"),
                                    el('button', { onClick: () => setProfile({...profile, gender: Gender.FEMALE}), className: `flex-1 py-2 rounded-lg border text-sm ${profile.gender === Gender.FEMALE ? 'bg-amber-500 border-amber-500' : 'border-slate-600 text-slate-400'}` }, "Â•≥ÊÄß")
                                )
                            ),
                            el('div', null,
                                el('label', { className: "block text-sm text-slate-400 mb-2" }, "‰ΩìÈáç (kg)"),
                                el('input', { type: "number", value: profile.weight, onChange: (e) => setProfile({...profile, weight: Number(e.target.value)}), className: "w-full bg-slate-900 border border-slate-600 rounded-lg py-2 px-4 text-white text-sm focus:ring-2 focus:ring-amber-500 outline-none" })
                            )
                        ),
                        el('div', null,
                            el('label', { className: "block text-sm text-slate-400 mb-2 flex items-center gap-1" }, el(User, { size: 14 }), "AI„Ç≠„É£„É©„ÇØ„Çø„Éº"),
                            el('div', { className: "grid grid-cols-3 gap-2" },
                                Object.entries(CHARACTERS).map(([key, char]) => el('button', { key, onClick: () => setProfile({...profile, character: key}), className: `p-3 rounded-xl border flex flex-col items-center gap-1 ${profile.character === key ? 'bg-amber-500/10 border-amber-500 text-amber-500' : 'border-slate-700 bg-slate-900 text-slate-400'}` },
                                    el('span', { className: "text-xl" }, char.icon),
                                    el('span', { className: "text-[10px] font-bold" }, char.name)
                                ))
                            )
                        ),
                        el('button', { onClick: () => { if(confirm('ÂÖ®„Å¶ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) setDrinks([]); }, className: "w-full py-2 text-red-400 text-xs hover:bg-red-400/10 rounded-lg transition" }, "Â±•Ê≠¥„ÇíÂÖ®„Å¶ÂâäÈô§")
                    )
                ),

                el('section', { className: "grid grid-cols-2 gap-4 mb-8" },
                    el('div', { className: "bg-slate-800 p-5 rounded-2xl border border-slate-700 shadow-xl" },
                        el('p', { className: "text-xs text-slate-400 mb-1 flex items-center gap-1" }, el(Activity, { size: 12 }), "Êé®ÂÆöBAC"),
                        el('div', { className: "flex items-baseline gap-1" }, el('span', { className: "text-3xl font-bold text-amber-400" }, stats.bac), el('span', { className: "text-sm text-slate-400" }, "%")),
                        el('div', { className: "mt-2 w-full bg-slate-700 rounded-full h-1.5" }, el('div', { className: `h-1.5 rounded-full ${stats.bac > 0.15 ? 'bg-red-500' : stats.bac > 0.05 ? 'bg-orange-500' : 'bg-green-500'}`, style: { width: `${Math.min(100, stats.bac * 400)}%` } }))
                    ),
                    el('div', { className: "bg-slate-800 p-5 rounded-2xl border border-slate-700 shadow-xl" },
                        el('p', { className: "text-xs text-slate-400 mb-1 flex items-center gap-1" }, el(RefreshCw, { size: 12 }), "ËÑ±ÈÖî„Åæ„Åß"),
                        el('div', { className: "flex items-baseline gap-1" }, el('span', { className: "text-3xl font-bold text-blue-400" }, stats.soberInHours), el('span', { className: "text-sm text-slate-400" }, "ÊôÇÈñì"))
                    ),
                    el('div', { className: "bg-slate-800 p-5 rounded-2xl border border-slate-700 shadow-xl" },
                        el('p', { className: "text-xs text-slate-400 mb-1" }, "„Ç¢„É´„Ç≥„Éº„É´Á∑èÈáè"),
                        el('div', { className: "flex items-baseline gap-1" }, el('span', { className: "text-2xl font-bold text-slate-200" }, stats.totalAlcoholGrams), el('span', { className: "text-sm text-slate-400" }, "g"))
                    ),
                    el('div', { className: "bg-slate-800 p-5 rounded-2xl border border-slate-700 shadow-xl" },
                        el('p', { className: "text-xs text-slate-400 mb-1" }, "Êé®ÂÆö„Ç´„É≠„É™„Éº"),
                        el('div', { className: "flex items-baseline gap-1" }, el('span', { className: "text-2xl font-bold text-slate-200" }, stats.calories), el('span', { className: "text-sm text-slate-400" }, "kcal"))
                    )
                ),

                el('section', { className: "mb-8" },
                    el('div', { className: "flex justify-between items-center mb-4" }, el('h2', { className: "text-lg font-bold flex items-center gap-2" }, el(Activity, { className: "text-amber-500" }), "AI„Ç¢„Éâ„Éê„Ç§„Çπ"), el('button', { disabled: isAiLoading || drinks.length === 0, onClick: getAIAdvice, className: "text-xs bg-amber-500 hover:bg-amber-600 disabled:bg-slate-700 text-white px-3 py-1.5 rounded-full font-medium transition" }, isAiLoading ? el(RefreshCw, { size: 14, className: "animate-spin" }) : 'AI„Å´ËÅû„Åè')),
                    el('div', { className: "bg-slate-900/80 rounded-2xl border border-slate-800 flex flex-col overflow-hidden" },
                        el('div', { className: "bg-slate-800/80 px-4 py-2 flex items-center gap-2 border-b border-slate-800/50" }, el('span', { className: "text-lg" }, activeChar.icon), el('span', { className: "text-xs font-bold text-amber-500" }, activeChar.name)),
                        el('div', { className: "p-5 min-h-[80px] flex items-center justify-center relative" }, isAiLoading && el('div', { className: "absolute inset-0 bg-slate-900/40 flex items-center justify-center backdrop-blur-sm" }, el(RefreshCw, { size: 32, className: "animate-spin text-amber-500" })), aiResponse ? el('div', { className: "text-sm leading-relaxed text-slate-300 whitespace-pre-wrap w-full" }, aiResponse) : el('p', { className: "text-slate-500 text-sm italic" }, `„Ç¢„Éâ„Éê„Ç§„Çπ„Çí„ÅäÂæÖ„Å°„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ`))
                    )
                ),

                drinks.length > 0 && el('section', { className: "mb-8" },
                    el('h2', { className: "text-lg font-bold mb-4 flex items-center gap-2" }, el(History, { className: "text-blue-500" }), "Áõ¥Ëøë7Êó•Èñì„ÅÆ„Éà„É¨„É≥„Éâ"),
                    el('div', { className: "bg-slate-800 p-4 rounded-2xl border border-slate-700 h-48" }, el(ResponsiveContainer, { width: "100%", height: "100%" }, el(BarChart, { data: chartData }, el(CartesianGrid, { strokeDasharray: "3 3", stroke: "#334155", vertical: false }), el(XAxis, { dataKey: "name", stroke: "#94a3b8", fontSize: 10, tickLine: false, axisLine: false }), el(YAxis, { stroke: "#94a3b8", fontSize: 10, tickLine: false, axisLine: false }), el(Tooltip, { contentStyle: { backgroundColor: '#1e293b', border: 'none', borderRadius: '8px', fontSize: '12px' } }), el(Bar, { dataKey: "amount", fill: "#f59e0b", radius: [4, 4, 0, 0] }))))
                ),

                el('section', { className: "mb-8" },
                    el('h2', { className: "text-lg font-bold mb-4" }, "Â±•Ê≠¥"),
                    el('div', { className: "space-y-3" }, drinks.length > 0 ? drinks.slice(0, 5).map(d => el('div', { key: d.id, className: "bg-slate-800/40 p-3 rounded-xl border border-slate-800 flex justify-between items-center" }, el('div', null, el('p', { className: "text-sm font-medium" }, d.name), el('p', { className: "text-[10px] text-slate-500" }, new Date(d.timestamp).toLocaleTimeString())), el('div', { className: "text-right" }, el('p', { className: "text-xs text-amber-500 font-bold" }, `${Math.round(calculateAlcoholGrams(d))}g`), el('p', { className: "text-[10px] text-slate-400" }, `${d.abv}% | ${d.volume}ml`)))) : el('p', { className: "text-slate-600 text-sm text-center py-8" }, "„Åæ„Å†Ë®òÈå≤„Åå„ÅÇ„Çä„Åæ„Åõ„Çì"))
                ),

                el('div', { className: "fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-slate-950 via-slate-950/90 to-transparent z-40" },
                    el('div', { className: "max-w-2xl mx-auto flex justify-center gap-4 pointer-events-auto" },
                        el('button', { onClick: () => setShowLogModal(true), className: "flex-1 bg-amber-500 text-white font-bold py-3 rounded-full shadow-2xl flex items-center justify-center gap-2 transform active:scale-95 transition" }, el(Plus, { size: 20 }), "ËøΩÂä†"),
                        el('button', { onClick: () => fileInputRef.current?.click(), disabled: isPhotoAnalyzing, className: "w-14 h-14 bg-slate-800 text-amber-500 rounded-full shadow-2xl flex items-center justify-center border border-slate-700" }, isPhotoAnalyzing ? el(RefreshCw, { size: 24, className: "animate-spin" }) : el(Camera, { size: 24 })),
                        el('input', { type: "file", ref: fileInputRef, onChange: analyzePhoto, accept: "image/*", capture: "environment", className: "hidden" })
                    )
                ),

                showLogModal && el('div', { className: "fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4" },
                    el('div', { className: "absolute inset-0 bg-black/60 backdrop-blur-sm", onClick: () => setShowLogModal(false) }),
                    el('div', { className: "relative bg-slate-900 w-full max-w-lg rounded-t-3xl sm:rounded-3xl border border-slate-700 p-6 animate-fade-in" },
                        el('h2', { className: "text-xl font-bold mb-6 text-center" }, "È£≤„ÅøÁâ©„ÇíËøΩÂä†"),
                        el('div', { className: "grid grid-cols-2 gap-3 mb-6 max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar" },
                            DRINK_PRESETS.map((p, idx) => el('button', { key: idx, onClick: () => addDrink(p), className: "bg-slate-800 p-4 rounded-xl border border-slate-700 text-left" }, el('p', { className: "text-sm font-bold" }, p.name), el('p', { className: "text-xs text-slate-400" }, `${p.abv}% | ${p.volume}ml`)))
                        ),
                        el('button', { onClick: () => setShowLogModal(false), className: "w-full py-3 bg-slate-800 text-slate-400 rounded-xl" }, "„Ç≠„É£„É≥„Çª„É´")
                    )
                ),

                analysisError && el('div', { className: "fixed top-6 left-4 right-4 z-[100] bg-red-500 text-white p-4 rounded-xl shadow-2xl flex items-center justify-between" }, el('p', { className: "text-sm" }, analysisError), el('button', { onClick: () => setAnalysisError(null) }, el(X, { size: 16 })))
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(el(React.StrictMode, null, el(App)));
    </script>
</body>
</html>
